<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Add Imagery Layer</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.2/dist/esri-leaflet.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Create the map
        var map = L.map('map').setView([-31.9505, 115.8575], 10); // Centered on Perth

        // Add a base layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add the imagery layer using Esri Leaflet
        var imageryLayer = L.esri.imageMapLayer({
          url: "https://token.slip.wa.gov.au/arcgis/rest/services/Landgate_Subscription_Imagery/WANow/ImageServer",
          token: "b-q3VP-iQ5wOBKX9T8s_4xHjT2i-Dc9UNRt_b85IPJ-g2NxRrB4TtRXF0jozmRdXaDNikhKl8oxFqj1_8dH7rw.."
        }).addTo(map);
      });
    </script>
  </head>
  <body>
    <div id="map" style="height: 100vh;"></div>
  </body>
</html>
